<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>How to make things in Sphinx &mdash; PIRS manual 1.1a documentation</title>
    
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1.1a',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="PIRS manual 1.1a documentation" href="index.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li><a href="index.html">PIRS manual 1.1a documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="how-to-make-things-in-sphinx">
<h1>How to make things in Sphinx<a class="headerlink" href="#how-to-make-things-in-sphinx" title="Permalink to this headline">¶</a></h1>
<p>I need several features of Sphinx:</p>
<blockquote>
<div><ul class="simple">
<li>Output to html and latex (formatted as internal report)</li>
<li>Code snippets</li>
<li>pictures from pdf files</li>
<li>links to other sphinx projects (i.e. from manual to reference)</li>
<li>Use of docstrings of currently installed package.</li>
</ul>
</div></blockquote>
<p>In this document I check these features.</p>
<div class="section" id="code-snippets">
<h2>Code snippets<a class="headerlink" href="#code-snippets" title="Permalink to this headline">¶</a></h2>
<p>I need to show the code in several ways:</p>
<blockquote>
<div><ul class="simple">
<li>inline code, without showing its output</li>
<li>inline code, followed by its output</li>
<li>code from external file, without showing its output</li>
<li>code from external file followed by its output.</li>
</ul>
</div></blockquote>
<p>For the code from external file, use the <tt class="docutils literal"><span class="pre">..</span> <span class="pre">literalinclude</span></tt> directive:</p>
<div class="highlight-python"><div class="highlight"><pre>.. literalinclude:: examples/ex1.py
</pre></div>
</div>
<p>that produces the following result:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">pirs.solids</span> <span class="kn">import</span> <span class="n">Cylinder</span>

<span class="n">c</span> <span class="o">=</span> <span class="n">Cylinder</span><span class="p">()</span>

<span class="k">print</span> <span class="n">c</span>
</pre></div>
</div>
<p>If the output of the code is needed in the document, it can be generated in
advance by redirecting the standard output of the python script to a file.
To automatize this process, one can extend the <tt class="docutils literal"><span class="pre">Makefile</span></tt> generated by Sphinx.
Assume, all example python scripts are in the <tt class="docutils literal"><span class="pre">source/examples</span></tt> folder. The
following addition in <tt class="docutils literal"><span class="pre">Makefile</span></tt> adds new target, <tt class="docutils literal"><span class="pre">examples</span></tt>, that generates
all output files:</p>
<div class="highlight-make"><div class="highlight"><pre><span class="nv">EXDIR</span><span class="o">=</span><span class="nb">source</span>/examples
<span class="nf">clean</span><span class="o">:</span>
	-rm -rf <span class="k">$(</span>BUILDDIR<span class="k">)</span>/*
	-rm <span class="k">$(</span>EXDIR<span class="k">)</span>/*.out

<span class="nf">ex1.out</span><span class="o">:</span> <span class="m">$(EXDIR)/ex1.py</span>
	python <span class="k">$(</span>EXDIR<span class="k">)</span>/ex1.py &gt; <span class="k">$(</span>EXDIR<span class="k">)</span>/ex1.out

<span class="nf">ex2.out</span><span class="o">:</span> <span class="m">$(EXDIR)/ex2.py</span>
	python <span class="k">$(</span>EXDIR<span class="k">)</span>/ex2.py &gt; <span class="k">$(</span>EXDIR<span class="k">)</span>/ex2.out

<span class="nf">tramat_e1.out</span><span class="o">:</span> <span class="m">$(EXDIR)/tramat_e1.py</span>
	python <span class="k">$(</span>EXDIR<span class="k">)</span>/tramat_e1.py &gt; <span class="k">$(</span>EXDIR<span class="k">)</span>/tramat_e1.out

<span class="nf">tramat_e2.out</span><span class="o">:</span> <span class="m">$(EXDIR)/tramat_e2.py</span>
	python <span class="k">$(</span>EXDIR<span class="k">)</span>/tramat_e2.py &gt; <span class="k">$(</span>EXDIR<span class="k">)</span>/tramat_e2.out

<span class="nf">tramat_e3.out</span><span class="o">:</span> <span class="m">$(EXDIR)/tramat_e3.py</span>
	python <span class="k">$(</span>EXDIR<span class="k">)</span>/tramat_e3.py &gt; <span class="k">$(</span>EXDIR<span class="k">)</span>/tramat_e3.out

<span class="nf">mcnp.mat_e1.out</span><span class="o">:</span> <span class="m">$(EXDIR)/mcnp.mat_e1.py</span>
	python <span class="k">$(</span>EXDIR<span class="k">)</span>/mcnp.mat_e1.py &gt; <span class="k">$(</span>EXDIR<span class="k">)</span>/mcnp.mat_e1.out

<span class="nf">mcnp.mat_e2.out</span><span class="o">:</span> <span class="m">$(EXDIR)/mcnp.mat_e2.py</span>
	python <span class="k">$(</span>EXDIR<span class="k">)</span>/mcnp.mat_e2.py &gt; <span class="k">$(</span>EXDIR<span class="k">)</span>/mcnp.mat_e2.out

<span class="nf">mcnp.sur1.out</span><span class="o">:</span> <span class="m">$(EXDIR)/mcnp.sur1.py</span>
	python <span class="k">$(</span>EXDIR<span class="k">)</span>/mcnp.sur1.py &gt; <span class="k">$(</span>EXDIR<span class="k">)</span>/mcnp.sur1.out

<span class="nf">mcnp.vol1.out</span><span class="o">:</span> <span class="m">$(EXDIR)/mcnp.vol1.py</span>
	python <span class="k">$(</span>EXDIR<span class="k">)</span>/mcnp.vol1.py &gt; <span class="k">$(</span>EXDIR<span class="k">)</span>/mcnp.vol1.out

<span class="nf">mcnp.vol2.out</span><span class="o">:</span> <span class="m">$(EXDIR)/mcnp.vol2.py</span>
	python <span class="k">$(</span>EXDIR<span class="k">)</span>/mcnp.vol2.py &gt; <span class="k">$(</span>EXDIR<span class="k">)</span>/mcnp.vol2.out

<span class="nf">mcnp.cell1.out</span><span class="o">:</span> <span class="m">$(EXDIR)/mcnp.cell1.py</span>
	python <span class="k">$(</span>EXDIR<span class="k">)</span>/mcnp.cell1.py &gt; <span class="k">$(</span>EXDIR<span class="k">)</span>/mcnp.cell1.out

<span class="nf">trageom.out</span><span class="o">:</span> <span class="m">$(EXDIR)/trageom.py</span>
	python <span class="k">$(</span>EXDIR<span class="k">)</span>/trageom.py &gt; <span class="k">$(</span>EXDIR<span class="k">)</span>/trageom.out

<span class="nf">sched_wp1.out</span><span class="o">:</span> <span class="m">$(EXDIR)/sched_wp1.py</span>
	rm -rf wp?
	python <span class="k">$(</span>EXDIR<span class="k">)</span>/sched_wp1.py &gt; <span class="k">$(</span>EXDIR<span class="k">)</span>/sched_wp1.out

<span class="nf">sched_if1.out</span><span class="o">:</span> <span class="m">$(EXDIR)/sched_if1.py</span>
	python <span class="k">$(</span>EXDIR<span class="k">)</span>/sched_if1.py &gt; <span class="k">$(</span>EXDIR<span class="k">)</span>/sched_if1.out

<span class="nf">sol1.out</span><span class="o">:</span> <span class="m">$(EXDIR)/sol1.py</span>
	python <span class="k">$(</span>EXDIR<span class="k">)</span>/sol1.py &gt; <span class="k">$(</span>EXDIR<span class="k">)</span>/sol1.out
	cp sol1*png <span class="nb">source</span>/_static/.

<span class="nf">sol2.out</span><span class="o">:</span> <span class="m">$(EXDIR)/sol2.py</span>
	python <span class="k">$(</span>EXDIR<span class="k">)</span>/sol2.py &gt; <span class="k">$(</span>EXDIR<span class="k">)</span>/sol2.out
	cp sol2*png <span class="nb">source</span>/_static/.

<span class="nf">sol3.out</span><span class="o">:</span> <span class="m">$(EXDIR)/sol3.py</span>
	python <span class="k">$(</span>EXDIR<span class="k">)</span>/sol3.py &gt; <span class="k">$(</span>EXDIR<span class="k">)</span>/sol3.out
	cp sol3*png <span class="nb">source</span>/_static/.

<span class="nf">examples</span><span class="o">:</span> <span class="m">ex1.out ex2.out tramat_e1.out tramat_e2.out tramat_e3.out mcnp.mat_e1.out mcnp.mat_e2.out mcnp.sur1.out mcnp.vol1.out mcnp.vol2.out mcnp.cell1.out trageom.out sched_wp1.out sched_if1.out sol1.out sol2.out sol3.out</span>


<span class="nf">html</span><span class="o">:</span> <span class="m">examples</span>
	<span class="k">$(</span>SPHINXBUILD<span class="k">)</span> -b html <span class="k">$(</span>ALLSPHINXOPTS<span class="k">)</span> <span class="k">$(</span>BUILDDIR<span class="k">)</span>/html
	@echo
	@echo <span class="s2">&quot;Build finished. The HTML pages are in $(BUILDDIR)/html.&quot;</span>
</pre></div>
</div>
<p>For inline code examples, one can use simply the double colon at the end of the preceding paragraph:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">pirs.solids</span> <span class="kn">import</span> <span class="n">Cylinder</span>

<span class="n">c</span> <span class="o">=</span> <span class="n">Cylinder</span><span class="p">()</span>
<span class="k">print</span> <span class="n">c</span>
</pre></div>
</div>
<p>Sometimes, snippets written in this way are not highlighted; the reason is probably in errors in the
snippet itself. This approach, however, cannot be used if the output of the code is needed. In this case,
one should use the <tt class="docutils literal"><span class="pre">..</span> <span class="pre">ipython::</span></tt> directive that comes with matplotlib extensions to sphinx.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [1]: </span><span class="kn">from</span> <span class="nn">pirs.solids</span> <span class="kn">import</span> <span class="n">Cylinder</span>

<span class="gp">In [2]: </span><span class="n">c</span> <span class="o">=</span> <span class="n">Cylinder</span><span class="p">()</span>

<span class="gp">In [3]: </span><span class="k">print</span> <span class="n">c</span>
</pre></div>
</div>
<p>THe drawback of this approach is that ipython-related markers <tt class="docutils literal"><span class="pre">In</span></tt> and <tt class="docutils literal"><span class="pre">Out</span></tt> are added to the output.
It seems there is no way to turn them off.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">How to make things in Sphinx</a><ul>
<li><a class="reference internal" href="#code-snippets">Code snippets</a></li>
</ul>
</li>
</ul>

  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/doc_example.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li><a href="index.html">PIRS manual 1.1a documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2014, Anton Travleev.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.2.
    </div>
  </body>
</html>